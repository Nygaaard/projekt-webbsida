{"mappings":"AEGwB,SAAS,cAAc,CAAC,iBCAxB,SAAS,cAAc,CAAC,iBFC7B,SAAS,cAAc,CAAC,YACvB,SAAS,cAAc,CAAC,aACzB,SAAS,cAAc,CAAC,YAC3B,SAAS,cAAc,CAAC,SACrB,SAAS,cAAc,CAAC,YACxB,SAAS,cAAc,CAAC,YAE3C,MAAM,EAAU,SAAS,cAAc,CAAC,SAClC,EAAkB,SAAS,cAAc,CAAC,iBAC1C,EAAkB,SAAS,cAAc,CAAC,gBAEf,CAAA,MAA7B,OAAO,QAAQ,CAAC,QAAQ,EAC1B,EAAQ,gBAAgB,CAAC,QAAS,iBAChC,MAAM,cAAc,GACpB,IAAM,EAAqB,EAAgB,KAAK,CAC1C,EAAqB,EAAgB,KAAK,CAKhD,GAHmB,MAAM,UAAU,EAAoB,GAIrD,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,SAC7B,EAAW,MAAM,YAAY,GACnC,gBAAgB,EAClB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,qCAChB,CAEJ","sources":["<anon>","src/js/main.js","src/js/loginAdmin.js","src/js/registerAdmin.js"],"sourcesContent":["//Login admin\n//Variables\nconst $b8af4006722c6bdd$var$errMessageLogEl = document.getElementById(\"errMessageLog\");\nasync function $b8af4006722c6bdd$export$8d9bfe7f2249575a(username, password) {\n    try {\n        //If any input field is missing\n        if (!username && !password) {\n            if (!username) $b8af4006722c6bdd$var$errMessageLogEl.textContent = \"Fyll i anv\\xe4ndarnamnet\";\n            if (!password) $b8af4006722c6bdd$var$errMessageLogEl.textContent = \"Fyll i l\\xf6senordet\";\n            $b8af4006722c6bdd$var$errMessageLogEl.textContent = \"B\\xe5de anv\\xe4ndarnamn och l\\xf6senord m\\xe5ste fyllas i \";\n        }\n        const url = \"http://localhost:3000/api/login\";\n        const response = await fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        //If wrong username/password\n        if (!response.ok) $b8af4006722c6bdd$var$errMessageLogEl.textContent = \"Fel anv\\xe4ndarnamn eller l\\xf6senord\";\n        //Kommentar\n        const data = await response.json();\n        const token = data.response.token;\n        const validate = await $b8af4006722c6bdd$export$b524a674cf218100(token);\n        //Validate authorization\n        if (validate.message === \"Protected route\") {\n            alert(\"Du \\xe4r inloggad\");\n            window.location.href = `admin?username=${username}`;\n        }\n    } catch (error) {\n        $b8af4006722c6bdd$var$errMessageLogEl.textContent = \"Fel vid inlogging\";\n    }\n}\nasync function $b8af4006722c6bdd$export$b524a674cf218100(token) {\n    const url = \"http://localhost:3000/api/protected\";\n    const response = await fetch(url, {\n        method: \"GET\",\n        headers: {\n            authorization: \"Bearer \" + token\n        }\n    }).then((response)=>{\n        if (!response.ok) throw new Error(\"Inloggningen misslyckades\");\n        localStorage.setItem(\"token\", token);\n        return response;\n    }).catch((error)=>{\n        console.error(\"Fel vid inloggning:\", error.message);\n    });\n    return response.json();\n}\n\n\n//Register new admin\n//Variables\nconst $1e6588bcda827c6d$var$errMessageRegEl = document.getElementById(\"errMessageReg\");\nasync function $1e6588bcda827c6d$export$862778ea698fdf39(firstname, lastname, email, username, password) {\n    try {\n        //Validation\n        //If any input field is empty\n        if (!firstname || !lastname || !email || !username || !password) $1e6588bcda827c6d$var$errMessageRegEl.textContent = \"Alla f\\xe4lt m\\xe5ste fyllas i.\";\n        // Invalid email\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(email)) {\n            $1e6588bcda827c6d$var$errMessageRegEl.textContent = \"Ogiltig email-adress.\";\n            return;\n        }\n        //Invalid username\n        if (username.length < 5) $1e6588bcda827c6d$var$errMessageRegEl.textContent = \"Anv\\xe4ndarnamn m\\xe5ste vara minst 5 tecken l\\xe5ngt.\";\n        //Invalid password\n        if (password.length < 8) $1e6588bcda827c6d$var$errMessageRegEl.textContent = \"L\\xf6senordet m\\xe5ste vara minst 8 tecken l\\xe5ngt.\";\n        // Kommentar\n        const url = \"http://localhost:3000/api/register\";\n        const response = await fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                firstname: firstname,\n                lastname: lastname,\n                email: email,\n                username: username,\n                password: password\n            })\n        });\n        //If register succeeds\n        if (!response.ok) $1e6588bcda827c6d$var$errMessageRegEl.textContent = \"Kunde inte registrera ny anv\\xe4ndare.\";\n        //Return result\n        const data = await response.json();\n        alert(\"Du \\xe4r nu registrerad!\");\n        let firstnameEl = document.getElementById(\"firstname\");\n        let lastnameEl = document.getElementById(\"lastname\");\n        let emailEl = document.getElementById(\"email\");\n        let usernameEl = document.getElementById(\"username\");\n        let passwordEl = document.getElementById(\"password\");\n        firstnameEl.value = \"\";\n        lastnameEl.value = \"\";\n        emailEl.value = \"\";\n        usernameEl = \"\";\n        passwordEl.value = \"\";\n        return data;\n    } catch (error) {\n        console.log(\"Error register new user:\");\n    }\n}\n\n\n//Variables\nconst $54b47fc030b7b21e$var$registerEl = document.getElementById(\"register\");\nconst $54b47fc030b7b21e$var$firstnameEl = document.getElementById(\"firstname\");\nconst $54b47fc030b7b21e$var$lastnameEl = document.getElementById(\"lastname\");\nconst $54b47fc030b7b21e$var$emailEl = document.getElementById(\"email\");\nconst $54b47fc030b7b21e$var$usernameEl = document.getElementById(\"username\");\nconst $54b47fc030b7b21e$var$passwordEl = document.getElementById(\"password\");\nconst $54b47fc030b7b21e$var$loginEl = document.getElementById(\"login\");\nconst $54b47fc030b7b21e$var$userNameLoginEl = document.getElementById(\"userNameLogin\");\nconst $54b47fc030b7b21e$var$passWordLoginEl = document.getElementById(\"passWordLogin\");\nif (window.location.pathname === \"/\") $54b47fc030b7b21e$var$loginEl.addEventListener(\"click\", async function() {\n    event.preventDefault();\n    const userNameLoginValue = $54b47fc030b7b21e$var$userNameLoginEl.value;\n    const passWordLoginValue = $54b47fc030b7b21e$var$passWordLoginEl.value;\n    const authorized = await loginUser(userNameLoginValue, passWordLoginValue);\n    //Authorization control\n    if (authorized) try {\n        const token = localStorage.getItem(\"token\");\n        const userInfo = await getUserInfo(token);\n        displayUserInfo(userInfo);\n    } catch (error) {\n        console.error(\"Could not find user information...\");\n    }\n});\n\n\n//# sourceMappingURL=admin.870c3d4e.js.map\n","import { loginAdmin } from \"./loginAdmin\";\r\nimport { registerAdmin } from \"./registerAdmin\";\r\n\r\n//Variables\r\nconst registerEl = document.getElementById(\"register\");\r\nconst firstnameEl = document.getElementById(\"firstname\");\r\nconst lastnameEl = document.getElementById(\"lastname\");\r\nconst emailEl = document.getElementById(\"email\");\r\nconst usernameEl = document.getElementById(\"username\");\r\nconst passwordEl = document.getElementById(\"password\");\r\n\r\nconst loginEl = document.getElementById(\"login\");\r\nconst userNameLoginEl = document.getElementById(\"userNameLogin\");\r\nconst passWordLoginEl = document.getElementById(\"passWordLogin\");\r\n\r\nif (window.location.pathname === \"/\") {\r\n  loginEl.addEventListener(\"click\", async function () {\r\n    event.preventDefault();\r\n    const userNameLoginValue = userNameLoginEl.value;\r\n    const passWordLoginValue = passWordLoginEl.value;\r\n\r\n    const authorized = await loginUser(userNameLoginValue, passWordLoginValue);\r\n\r\n    //Authorization control\r\n    if (authorized) {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const userInfo = await getUserInfo(token);\r\n        displayUserInfo(userInfo);\r\n      } catch (error) {\r\n        console.error(\"Could not find user information...\");\r\n      }\r\n    }\r\n  });\r\n}\r\n","//Login admin\r\n\r\n//Variables\r\nconst errMessageLogEl = document.getElementById(\"errMessageLog\");\r\n\r\nexport async function loginAdmin(username, password) {\r\n  try {\r\n    //If any input field is missing\r\n    if (!username && !password) {\r\n      if (!username) {\r\n        errMessageLogEl.textContent = \"Fyll i användarnamnet\";\r\n      }\r\n      if (!password) {\r\n        errMessageLogEl.textContent = \"Fyll i lösenordet\";\r\n      }\r\n      errMessageLogEl.textContent =\r\n        \"Både användarnamn och lösenord måste fyllas i \";\r\n    }\r\n\r\n    const url = \"http://localhost:3000/api/login\";\r\n\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    //If wrong username/password\r\n    if (!response.ok) {\r\n      errMessageLogEl.textContent = \"Fel användarnamn eller lösenord\";\r\n    }\r\n\r\n    //Kommentar\r\n    const data = await response.json();\r\n    const token = data.response.token;\r\n    const validate = await validateUser(token);\r\n\r\n    //Validate authorization\r\n    if (validate.message === \"Protected route\") {\r\n      alert(\"Du är inloggad\");\r\n\r\n      window.location.href = `admin?username=${username}`;\r\n    }\r\n  } catch (error) {\r\n    errMessageLogEl.textContent = \"Fel vid inlogging\";\r\n  }\r\n}\r\n\r\nexport async function validateUser(token) {\r\n  const url = \"http://localhost:3000/api/protected\";\r\n  const response = await fetch(url, {\r\n    method: \"GET\",\r\n    headers: {\r\n      authorization: \"Bearer \" + token,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(\"Inloggningen misslyckades\");\r\n      }\r\n      localStorage.setItem(\"token\", token);\r\n\r\n      return response;\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Fel vid inloggning:\", error.message);\r\n    });\r\n  return response.json();\r\n}\r\n","//Register new admin\r\n\r\n//Variables\r\nconst errMessageRegEl = document.getElementById(\"errMessageReg\");\r\n\r\nexport async function registerAdmin(\r\n  firstname,\r\n  lastname,\r\n  email,\r\n  username,\r\n  password\r\n) {\r\n  try {\r\n    //Validation\r\n    //If any input field is empty\r\n    if (!firstname || !lastname || !email || !username || !password) {\r\n      errMessageRegEl.textContent = \"Alla fält måste fyllas i.\";\r\n    }\r\n\r\n    // Invalid email\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      errMessageRegEl.textContent = \"Ogiltig email-adress.\";\r\n      return;\r\n    }\r\n\r\n    //Invalid username\r\n    if (username.length < 5) {\r\n      errMessageRegEl.textContent =\r\n        \"Användarnamn måste vara minst 5 tecken långt.\";\r\n    }\r\n\r\n    //Invalid password\r\n    if (password.length < 8) {\r\n      errMessageRegEl.textContent =\r\n        \"Lösenordet måste vara minst 8 tecken långt.\";\r\n    }\r\n\r\n    // Kommentar\r\n    const url = \"http://localhost:3000/api/register\";\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        firstname,\r\n        lastname,\r\n        email,\r\n        username,\r\n        password,\r\n      }),\r\n    });\r\n\r\n    //If register succeeds\r\n    if (!response.ok) {\r\n      errMessageRegEl.textContent = \"Kunde inte registrera ny användare.\";\r\n    }\r\n\r\n    //Return result\r\n    const data = await response.json();\r\n    alert(\"Du är nu registrerad!\");\r\n\r\n    let firstnameEl = document.getElementById(\"firstname\");\r\n    let lastnameEl = document.getElementById(\"lastname\");\r\n    let emailEl = document.getElementById(\"email\");\r\n    let usernameEl = document.getElementById(\"username\");\r\n    let passwordEl = document.getElementById(\"password\");\r\n\r\n    firstnameEl.value = \"\";\r\n    lastnameEl.value = \"\";\r\n    emailEl.value = \"\";\r\n    usernameEl = \"\";\r\n    passwordEl.value = \"\";\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"Error register new user:\");\r\n  }\r\n}\r\n"],"names":["document","getElementById","$54b47fc030b7b21e$var$loginEl","$54b47fc030b7b21e$var$userNameLoginEl","$54b47fc030b7b21e$var$passWordLoginEl","window","location","pathname","addEventListener","event","preventDefault","userNameLoginValue","value","passWordLoginValue","loginUser","token","localStorage","getItem","userInfo","getUserInfo","displayUserInfo","error","console"],"version":3,"file":"admin.870c3d4e.js.map"}